<html>
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Page Refresher</title>
  <link rel="stylesheet" href="popup.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head> 
<body>
    <div class="container">
      <div class="header-container">
        <div class="header-logo">
          <img src="assets/icon128.png" width="48px" alt="Auto-Refresher Logo" class="logo">
        </div>
        <div class="header-text">
          <h1 class="header-title extension-name">Auto-Page Refresher</h1>
          <span class="version"></span>
        </div>
        <div class="header-icons">
          <a href="https://trakteer.id/akbarhlubis/tip" class="icon-btn trakteer" target="_blank" title="Donate">
            <i class="bi bi-heart-fill"></i>
          </a>
          <button id="check-update-btn" class="icon-btn" title="Check for Update">
            <i class="bi bi-arrow-repeat"></i>
          </button>
        </div>
      </div>

      <div class="settings-section">
        <h2>Settings Condition and Actions</h2>
        <form id="auto-refresher-form" autocomplete="off">
          <div class="input-group">
            <label>Selectors to check:</label>
            <div id="selectors-list"></div>
            <button id="add-selector" type="button" class="btn">Add Selector</button>
            <button id="pick-selector" type="button" class="btn">Pick Selector</button>
          </div>
          <div class="input-group">
            <button id="toggle-condition" type="button" class="btn">Condition: ON</button>
            <span class="desc">(Toggle to use or ignore selector condition)</span>
          </div>
          <div class="collapse-optional">
            <button class="collapse-toggle" type="button" data-target="#collapse-compare" aria-expanded="false" aria-controls="collapse-compare">
              <i class="bi bi-chevron-down"></i> Compare Selectors (opsional)
            </button>
            <div id="collapse-compare" class="collapse-content" style="display:none;">
              <div class="input-group">
                <button id="toggle-compare" type="button" class="btn off" style="margin-bottom:8px;">OFF</button>
                <div id="compare-fields" style="display:none; gap:8px; flex-wrap:wrap; align-items:center; margin-top:8px;">
                  <div class="input-icon-group" style="position:relative;width:90px;">
                    <i class="bi bi-hash input-icon" style="position:absolute;left:8px;top:50%;transform:translateY(-50%);color:#bfc9d1;font-size:15px;"></i>
                    <input id="compare-selector1" type="text" placeholder="Selector 1" class="input-group styled-input" style="width:100%;padding-left:28px;" />
                  </div>
                  <div class="input-icon-group" style="position:relative;width:60px;">
                    <i class="bi bi-funnel input-icon" style="position:absolute;left:8px;top:50%;transform:translateY(-50%);color:#bfc9d1;font-size:15px;"></i>
                    <select id="compare-operator" class="input-group styled-select" style="width:100%;padding-left:28px;">
                    <option value="=">=</option>
                    <option value="!=">!=</option>
                    <option value=">">&gt;</option>
                    <option value="<">&lt;</option>
                    <option value=">=">&ge;</option>
                    <option value="<=">&le;</option>
                  </select>
                  </div>
                  <div class="input-icon-group" style="position:relative;width:90px;">
                    <i class="bi bi-hash input-icon" style="position:absolute;left:8px;top:50%;transform:translateY(-50%);color:#bfc9d1;font-size:15px;"></i>
                    <input id="compare-selector2" type="text" placeholder="Selector 2" class="input-group styled-input" style="width:100%;padding-left:28px;" />
                  </div>
                  <div class="input-icon-group" style="position:relative;width:120px;">
                    <i class="bi bi-lightning-charge input-icon" style="position:absolute;left:8px;top:50%;transform:translateY(-50%);color:#bfc9d1;font-size:15px;"></i>
                    <select id="compare-action" class="input-group styled-select" style="width:100%;padding-left:28px;">
                    <option value="refresh">Refresh</option>
                    <option value="no-refresh">Tidak Refresh</option>
                    </select>
                  </div>
                  <span class="desc" style="margin:0;">Aksi jika hasil perbandingan terpenuhi</span>
                </div>
              </div>
            </div>
          </div>
          <div class="collapse-optional">
            <button class="collapse-toggle" type="button" data-target="#collapse-url-reload" aria-expanded="false" aria-controls="collapse-url-reload">
              <i class="bi bi-chevron-down"></i> Reload URL tertentu (opsional)
            </button>
            <div id="collapse-url-reload" class="collapse-content" style="display:none;">
              <div class="input-group">
                <button id="toggle-url-reload" type="button" class="btn off" style="margin-bottom:8px;">OFF</button>
                <div id="url-reload-fields" style="display:none; gap:8px; flex-wrap:wrap; align-items:center; margin-top:8px;">
                  <div class="input-icon-group" style="position:relative;width:220px;">
                    <i class="bi bi-link-45deg input-icon" style="position:absolute;left:8px;top:50%;transform:translateY(-50%);color:#bfc9d1;font-size:15px;"></i>
                    <input id="url-reload-input" type="text" placeholder="https://contoh.com/page" class="input-group styled-input" style="width:100%;padding-left:28px;" />
                  </div>
                  <button id="get-current-url" type="button" class="btn" style="margin-left:0;margin-top:4px;padding:6px 12px;font-size:13px;">Ambil URL Tab Aktif</button>
                  <span class="desc" style="margin:0;">Tab dengan URL ini akan di-reload otomatis</span>
                </div>
              </div>
            </div>
          </div>
          <div class="input-group">
            <label>Debug:</label>
            <button id="debug-check" type="button" class="btn" style="background:#f59e42;">Debug Selector & Value</button>
            <div id="debug-result" style="margin-top:10px;font-size:13px;color:#374151;background:#f1f5f9;padding:8px 10px;border-radius:6px;display:none;"></div>
          </div>
          <div class="input-group">
            <label>Interval (ms): </label>
            <div class="input-icon-group" style="position:relative;width:120px;display:inline-block;">
              <i class="bi bi-clock input-icon" style="position:absolute;left:8px;top:50%;transform:translateY(-50%);color:#bfc9d1;font-size:15px;"></i>
              <input id="interval-input" type="number" min="100" value="1000" class="input-group styled-input" style="width:100%;padding-left:28px;" />
            </div>
            <button id="toggle-reload" type="button" class="btn">Turn ON Reload</button>
          </div>
        </form>
        <div class="footer">
          <p>Designed and Developed With ‚ù§ By Akbarhlubis</p>
        </div>
      </div>
    </div>
    <script src="libs/jquery-3.7.1.min.js"></script>
    <script src="scripts/script.js"></script>
  </body>
</html>